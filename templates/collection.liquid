{{ paginator =  collection.products  | paginate 20 }}

{% assign has_sidebar = false %}
{% unless product_search_result.aggregations.empty? %}
  {% assign has_sidebar = true %}
{% endunless %}

<div class="d-flex flex-wrap flex-sm-row flex-column mt-3">
    {% if has_sidebar %}
    <aside class="col-md-2 pl-0" id="collectionFilters">
      {% include 'collection-sidebar' %}
    </aside>
    {% endif %}

    <div class="col-12 {% if has_sidebar %}col-md-10{% endif %}">

        {% comment %}
        Different markup if description is set
        {% endcomment %}
        {% if collection.description.empty? == false %}
        <div class="row justify-content-between">
          <header class="col-sm-5">
            <h1>{{ collection.title }}</h1>
            <div>
                {{ collection.description }}
            </div>
        </header>
        <div class="col-sm-6">
            <div class="d-flex flex-wrap justify-content-between">
                {% include 'collection-sorting' %}
                {% include 'collection-views' %}
            </div>
        </div>
        </div>
        {% else %}
        <header class="d-flex flex-wrap flex-sm-row flex-column justify-content-between mb-4">
            <h1>{{ collection.title }}</h1>
            <div class="d-flex flex-wrap justify-content-between">
                {% include 'collection-sorting' %}
                {% include 'collection-views' %}
            </div>
        </header>
        {% endif %}

        <div class="row">
            {% for product in collection.products %}

            {% if has_sidebar %}
            {% assign grid_item_width = 'col-lg-3 col-md-4 col-6' %}
            {% else %}
            {% assign grid_item_width = 'col-lg-2 col-md-4 col-6' %}
            {% endif %}
            {% include 'product-grid-item' %}

            {% endfor %}
        </div>

        {% if paginator.pages > 1 %}
          <div class="d-flex justify-content-between">
            {% include 'pagination-custom' %}
            {% include 'page-size' %}
          </div>
        {% endif %}

    </div>

</div>
